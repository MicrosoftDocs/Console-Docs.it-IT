---
title: Buffer di input della console
description: Ogni console dispone di un buffer di input che contiene una coda di record di eventi di input.
author: miniksa
ms.author: miniksa
ms.topic: article
keywords: Console, applicazioni in modalità carattere, applicazioni da riga di comando, applicazioni Terminal, API console
MS-HAID:
- '\_win32\_console\_input\_buffer'
- base.console\_input\_buffer
- consoles.console\_input\_buffer
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 6e536658-8a27-478e-82ee-d1e11f351301
ms.openlocfilehash: 0a4843279b97da0ca6db50a9ccfa3de644044b68
ms.sourcegitcommit: b75f4688e080d300b80c552d0711fdd86b9974bf
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/24/2020
ms.locfileid: "89060092"
---
# <a name="console-input-buffer"></a><span data-ttu-id="dbe0d-104">Buffer di input della console</span><span class="sxs-lookup"><span data-stu-id="dbe0d-104">Console Input Buffer</span></span>


<span data-ttu-id="dbe0d-105">Ogni console dispone di un buffer di input che contiene una coda di record di eventi di input.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-105">Each console has an input buffer that contains a queue of input event records.</span></span> <span data-ttu-id="dbe0d-106">Quando la finestra di una console dispone dello stato attivo della tastiera, una console formatta ogni evento di input (ad esempio, una singola sequenza di tasti, un movimento del mouse o un clic del pulsante del mouse) come record di input che inserisce nel buffer di input della console.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-106">When a console's window has the keyboard focus, a console formats each input event (such as a single keystroke, a movement of the mouse, or a mouse-button click) as an input record that it places in the console's input buffer.</span></span>

<span data-ttu-id="dbe0d-107">Le applicazioni possono accedere indirettamente al buffer di input di una console usando le [funzioni di i/O della console di alto livello](high-level-console-input-and-output-functions.md)o direttamente usando le [funzioni di input della console di basso livello](low-level-console-input-functions.md).</span><span class="sxs-lookup"><span data-stu-id="dbe0d-107">Applications can access a console's input buffer indirectly by using the [high-level console I/O functions](high-level-console-input-and-output-functions.md), or directly by using the [low-level console input functions](low-level-console-input-functions.md).</span></span> <span data-ttu-id="dbe0d-108">Le funzioni di input di alto livello filtrano ed elaborano i dati nel buffer di input, restituendo solo un flusso di caratteri di input.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-108">The high-level input functions filter and process the data in the input buffer, returning only a stream of input characters.</span></span> <span data-ttu-id="dbe0d-109">Le funzioni di input di basso livello consentono alle applicazioni di leggere i record di input direttamente dal buffer di input di una console o di inserire record di input nel buffer di input.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-109">The low-level input functions enable applications to read input records directly from a console's input buffer, or to place input records into the input buffer.</span></span> <span data-ttu-id="dbe0d-110">Per aprire un handle per il buffer di input di una console, specificare il valore **CONIN $** in una chiamata alla funzione [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) .</span><span class="sxs-lookup"><span data-stu-id="dbe0d-110">To open a handle to a console's input buffer, specify the **CONIN$** value in a call to the [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) function.</span></span>

<span data-ttu-id="dbe0d-111">Un record di input è una struttura che contiene informazioni sul tipo di evento che si è verificato (tastiera, mouse, ridimensionamento della finestra, stato attivo o evento di menu), oltre a dettagli specifici sull'evento.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-111">An input record is a structure containing information about the type of event that occurred (keyboard, mouse, window resizing, focus, or menu event) as well as specific details about the event.</span></span> <span data-ttu-id="dbe0d-112">Il membro **eventType** in una struttura di [\*\* \_ record di input\*\*](input-record-str.md) indica quale tipo di evento è contenuto nel record.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-112">The **EventType** member in an [**INPUT\_RECORD**](input-record-str.md) structure indicates which type of event is contained in the record.</span></span>

<span data-ttu-id="dbe0d-113">Gli eventi di menu e lo stato attivo vengono inseriti nel buffer di input di una console per l'uso interno da parte del sistema e devono essere ignorati dalle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-113">Focus and menu events are placed in a console's input buffer for internal use by the system and should be ignored by applications.</span></span>

## <a name="span-idkeyboard_eventsspanspan-idkeyboard_eventsspanspan-idkeyboard_eventsspankeyboard-events"></a><span data-ttu-id="dbe0d-114"><span id="Keyboard_Events"></span><span id="keyboard_events"></span><span id="KEYBOARD_EVENTS"></span>Eventi della tastiera</span><span class="sxs-lookup"><span data-stu-id="dbe0d-114"><span id="Keyboard_Events"></span><span id="keyboard_events"></span><span id="KEYBOARD_EVENTS"></span>Keyboard Events</span></span>


<span data-ttu-id="dbe0d-115">Gli eventi della tastiera vengono generati quando viene premuto o rilasciato un tasto; sono incluse le chiavi di controllo.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-115">Keyboard events are generated when any key is pressed or released; this includes control keys.</span></span> <span data-ttu-id="dbe0d-116">Tuttavia, il tasto ALT ha un significato speciale per il sistema quando viene premuto e rilasciato senza essere combinato con un altro carattere e non viene passato all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-116">However, the ALT key has special meaning to the system when pressed and released without being combined with another character, and it is not passed through to the application.</span></span> <span data-ttu-id="dbe0d-117">Inoltre, la combinazione di tasti CTRL + C non viene passata se l'handle di input è in modalità elaborata.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-117">Also, the CTRL+C key combination is not passed through if the input handle is in processed mode.</span></span>

<span data-ttu-id="dbe0d-118">Se l'evento di input è una sequenza di tasti, il membro dell' **evento** nel [\*\* \_ record di input\*\*](input-record-str.md) è una struttura di [\*\* \_ \_ record di eventi chiave\*\*](key-event-record-str.md) che contiene le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="dbe0d-118">If the input event is a keystroke, the **Event** member in [**INPUT\_RECORD**](input-record-str.md) is a [**KEY\_EVENT\_RECORD**](key-event-record-str.md) structure containing the following information:</span></span>

- <span data-ttu-id="dbe0d-119">Valore booleano che indica se il tasto è stato premuto o rilasciato.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-119">A Boolean value indicating whether the key was pressed or released.</span></span>
- <span data-ttu-id="dbe0d-120">Numero di ripetizioni che può essere maggiore di uno quando si tiene premuto un tasto.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-120">A repeat count that can be greater than one when a key is held down.</span></span>
- <span data-ttu-id="dbe0d-121">Codice della chiave virtuale, che identifica la chiave specificata in modo indipendente dal dispositivo.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-121">The virtual-key code, identifying the given key in a device-independent manner.</span></span>
- <span data-ttu-id="dbe0d-122">Codice di analisi virtuale, che indica il valore dipendente dal dispositivo generato dall'hardware della tastiera.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-122">The virtual-scan code, indicating the device-dependent value generated by the keyboard hardware.</span></span>
- <span data-ttu-id="dbe0d-123">Il™ Unicode tradotto o il carattere ANSI.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-123">The translated Unicode™ or ANSI character.</span></span>
- <span data-ttu-id="dbe0d-124">Variabile di flag che indica lo stato delle chiavi di controllo (ALT, CTRL, MAIUSC, BLOC NUM, BLOC SCORR e BLOC MAIUSC) e che indica se è stata premuta una chiave avanzata.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-124">A flag variable indicating the state of the control keys (the ALT, CTRL, SHIFT, NUM LOCK, SCROLL LOCK, and CAPS LOCK keys) and indicating whether an enhanced key was pressed.</span></span> <span data-ttu-id="dbe0d-125">Le chiavi avanzate per le tastiere IBM® 101-Key e 102-Key sono i INS, CANC, HOME, END, PGSU, PGGIÙ e i tasti di direzione nei cluster a sinistra del tastierino numerico e la divisione (/) e immettono le chiavi nel tastierino numerico.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-125">Enhanced keys for the IBM® 101-key and 102-key keyboards are the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad and the divide (/) and ENTER keys in the numeric keypad.</span></span>

## <a name="span-idmouse_eventsspanspan-idmouse_eventsspanspan-idmouse_eventsspanmouse-events"></a><span data-ttu-id="dbe0d-126"><span id="Mouse_Events"></span><span id="mouse_events"></span><span id="MOUSE_EVENTS"></span>Eventi del mouse</span><span class="sxs-lookup"><span data-stu-id="dbe0d-126"><span id="Mouse_Events"></span><span id="mouse_events"></span><span id="MOUSE_EVENTS"></span>Mouse Events</span></span>


<span data-ttu-id="dbe0d-127">Gli eventi del mouse vengono generati ogni volta che l'utente sposta il mouse o preme o rilascia uno dei pulsanti del mouse.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-127">Mouse events are generated whenever the user moves the mouse or presses or releases one of the mouse buttons.</span></span> <span data-ttu-id="dbe0d-128">Gli eventi del mouse vengono inseriti nel buffer di input solo se vengono soddisfatte le condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="dbe0d-128">Mouse events are placed in the input buffer only if the following conditions are met:</span></span>

- <span data-ttu-id="dbe0d-129">La modalità di input della console è impostata per **abilitare l' \_ \_ input del mouse** (modalità predefinita).</span><span class="sxs-lookup"><span data-stu-id="dbe0d-129">The console input mode is set to **ENABLE\_MOUSE\_INPUT** (the default mode).</span></span>
- <span data-ttu-id="dbe0d-130">La finestra della console dispone dello stato attivo della tastiera.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-130">The console window has the keyboard focus.</span></span>
- <span data-ttu-id="dbe0d-131">Il puntatore del mouse si trova all'interno dei bordi della finestra della console.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-131">The mouse pointer is within the borders of the console's window.</span></span>

<span data-ttu-id="dbe0d-132">Se l'evento di input è un evento del mouse, il membro dell' **evento** nel [\*\* \_ record di input\*\*](input-record-str.md) è una struttura di [\*\* \_ \_ record di eventi del mouse\*\*](mouse-event-record-str.md) che contiene le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="dbe0d-132">If the input event is a mouse event, the **Event** member in [**INPUT\_RECORD**](input-record-str.md) is a [**MOUSE\_EVENT\_RECORD**](mouse-event-record-str.md) structure containing the following information:</span></span>

- <span data-ttu-id="dbe0d-133">Coordinate del puntatore del mouse in termini di riga della cella di caratteri e colonna nel sistema di coordinate del buffer dello schermo della console.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-133">The coordinates of the mouse pointer in terms of the character-cell row and column in the console screen buffer's coordinate system.</span></span>
- <span data-ttu-id="dbe0d-134">Variabile di flag che indica lo stato dei pulsanti del mouse.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-134">A flag variable indicating the state of the mouse buttons.</span></span>
- <span data-ttu-id="dbe0d-135">Variabile di flag che indica lo stato delle chiavi di controllo (ALT, CTRL, MAIUSC, BLOC NUM, SCROLL LOCK e CAPS LOCK) e che indica se è stato premuto un tasto avanzato.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-135">A flag variable indicating the state of the control keys (ALT, CTRL, SHIFT, NUM LOCK, SCROLL LOCK, and CAPS LOCK) and indicating whether an enhanced key was pressed.</span></span> <span data-ttu-id="dbe0d-136">Le chiavi avanzate per le tastiere IBM 101-Key e 102-Key sono i valori INS, CANC, HOME, END, PGSU, PGGIÙ e i tasti di direzione nei cluster a sinistra del tastierino numerico e la divisione (/) e immettono le chiavi nel tastierino numerico.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-136">Enhanced keys for the IBM 101-key and 102-key keyboards are the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad and the divide (/) and ENTER keys in the numeric keypad.</span></span>
- <span data-ttu-id="dbe0d-137">Variabile di flag che indica se si tratta di un evento normale di pressione o di un pulsante, un evento di spostamento del mouse o il secondo clic di un evento di doppio clic.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-137">A flag variable indicating whether the event was a normal button-press or button-release event, a mouse movement event, or the second click of a double-click event.</span></span>

<span data-ttu-id="dbe0d-138">**Nota**    Le coordinate della posizione del mouse sono espresse in termini di buffer dello schermo della console, non della finestra della console.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-138">**Note**  The mouse position coordinates are in terms of the console screen buffer, not the console window.</span></span> <span data-ttu-id="dbe0d-139">È possibile che sia stato eseguito lo scorrimento del buffer dello schermo rispetto alla finestra, in modo che l'angolo superiore sinistro della finestra non sia necessariamente la coordinata (0, 0) del buffer dello schermo della console.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-139">The screen buffer may have been scrolled with respect to the window, so the upper left corner of the window is not necessarily the (0,0) coordinate of the console screen buffer.</span></span> <span data-ttu-id="dbe0d-140">Per determinare le coordinate del mouse rispetto al sistema di coordinate della finestra, sottrarre le coordinate di origine della finestra dalle coordinate della posizione del mouse.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-140">To determine the coordinates of the mouse relative to the coordinate system of the window, subtract the window origin coordinates from the mouse position coordinates.</span></span> <span data-ttu-id="dbe0d-141">Utilizzare la funzione [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) per determinare le coordinate di origine della finestra.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-141">Use the [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) function to determine the window origin coordinates.</span></span>

 

<span data-ttu-id="dbe0d-142">Il membro **dwButtonState** della struttura [**del \_ \_ record dell'evento del mouse**](mouse-event-record-str.md) presenta un bit corrispondente a ogni pulsante del mouse.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-142">The **dwButtonState** member of the [**MOUSE\_EVENT\_RECORD**](mouse-event-record-str.md) structure has a bit corresponding to each mouse button.</span></span> <span data-ttu-id="dbe0d-143">Il bit è 1 se il pulsante è inattivo e 0 se il pulsante è attivo.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-143">The bit is 1 if the button is down and 0 if the button is up.</span></span> <span data-ttu-id="dbe0d-144">Un evento di rilascio del pulsante viene rilevato da un valore 0 per il membro **dwEventFlags** del **record dell' \_ evento \_ del mouse** e da una modifica del bit di un pulsante da 1 a 0.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-144">A button-release event is detected by a 0 value for the **dwEventFlags** member of **MOUSE\_EVENT\_RECORD** and a change in a button's bit from 1 to 0.</span></span> <span data-ttu-id="dbe0d-145">La funzione [**GetNumberOfConsoleMouseButtons**](getnumberofconsolemousebuttons.md) Recupera il numero di pulsanti del mouse.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-145">The [**GetNumberOfConsoleMouseButtons**](getnumberofconsolemousebuttons.md) function retrieves the number of buttons on the mouse.</span></span>

## <a name="span-idbuffer-resizing_eventsspanspan-idbuffer-resizing_eventsspanspan-idbuffer-resizing_eventsspanbuffer-resizing-events"></a><span data-ttu-id="dbe0d-146"><span id="Buffer-Resizing_Events"></span><span id="buffer-resizing_events"></span><span id="BUFFER-RESIZING_EVENTS"></span>Buffer-ridimensionamento degli eventi</span><span class="sxs-lookup"><span data-stu-id="dbe0d-146"><span id="Buffer-Resizing_Events"></span><span id="buffer-resizing_events"></span><span id="BUFFER-RESIZING_EVENTS"></span>Buffer-Resizing Events</span></span>


<span data-ttu-id="dbe0d-147">Il menu di una finestra della console consente all'utente di modificare le dimensioni del buffer dello schermo attivo; Questa modifica genera un evento di ridimensionamento del buffer.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-147">A console window's menu enables the user to change the size of the active screen buffer; this change generates a buffer-resizing event.</span></span> <span data-ttu-id="dbe0d-148">Gli eventi di ridimensionamento del buffer vengono inseriti nel buffer di input se la modalità di input della console è impostata su **Abilita \_ \_ input finestra** (ovvero la modalità predefinita è disabilitata).</span><span class="sxs-lookup"><span data-stu-id="dbe0d-148">Buffer-resizing events are placed in the input buffer if the console's input mode is set to **ENABLE\_WINDOW\_INPUT** (that is, the default mode is disabled).</span></span>

<span data-ttu-id="dbe0d-149">Se l'evento di input è un evento di ridimensionamento del buffer, il membro dell' **evento** del [\*\* \_ record di input\*\*](input-record-str.md) è una struttura di [\*\* \_ \_ \_ record delle dimensioni del buffer della finestra\*\*](window-buffer-size-record-str.md) contenente la nuova dimensione del buffer dello schermo della console, espressa in righe e colonne della cella di tipo carattere.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-149">If the input event is a buffer-resizing event, the **Event** member of [**INPUT\_RECORD**](input-record-str.md) is a [**WINDOW\_BUFFER\_SIZE\_RECORD**](window-buffer-size-record-str.md) structure containing the new size of the console screen buffer, expressed in character-cell columns and rows.</span></span>

<span data-ttu-id="dbe0d-150">Se l'utente riduce le dimensioni del buffer dello schermo della console, tutti i dati nella parte scartata del buffer vengono persi.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-150">If the user reduces the size of the console screen buffer, any data in the discarded portion of the buffer is lost.</span></span>

<span data-ttu-id="dbe0d-151">Le modifiche apportate alle dimensioni del buffer dello schermo della console in seguito alle chiamate dell'applicazione alla funzione [**SetConsoleScreenBufferSize**](setconsolescreenbuffersize.md) non vengono generate come eventi di ridimensionamento del buffer.</span><span class="sxs-lookup"><span data-stu-id="dbe0d-151">Changes to the console screen buffer size as a result of application calls to the [**SetConsoleScreenBufferSize**](setconsolescreenbuffersize.md) function are not generated as buffer-resizing events.</span></span>

 

 




