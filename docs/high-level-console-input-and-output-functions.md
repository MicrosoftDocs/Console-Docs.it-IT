---
title: Funzioni di input e output della console High-Level
description: Le funzioni ReadFile e WriteFile, o le funzioni ReadConsole e WriteConsole, consentono a un'applicazione di leggere l'input della console e di scrivere l'output della console come flusso di caratteri.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: console, applicazioni in modalità carattere, applicazioni da riga di comando, applicazioni di terminale, api della console
MS-HAID:
- '\_win32\_high\_level\_console\_input\_and\_output\_functions'
- base.high\_level\_console\_input\_and\_output\_functions
- consoles.high\_level\_console\_input\_and\_output\_functions
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 086b1bec-85f8-4e31-848d-7cb2d2703a3d
ms.openlocfilehash: 4da8845e4e35170980d306930c182ff6e5fb6cbf
ms.sourcegitcommit: 281eb1469f77ae4fb4c67806898e14eac440522a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/14/2021
ms.locfileid: "100358301"
---
# <a name="high-level-console-input-and-output-functions"></a><span data-ttu-id="59239-104">Funzioni di input e output della console High-Level</span><span class="sxs-lookup"><span data-stu-id="59239-104">High-Level Console Input and Output Functions</span></span>

<span data-ttu-id="59239-105">Le funzioni [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) e [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) , o le funzioni [**ReadConsole**](readconsole.md) e [**WriteConsole**](writeconsole.md) , consentono a un'applicazione di leggere l'input della console e di scrivere l'output della console come flusso di caratteri.</span><span class="sxs-lookup"><span data-stu-id="59239-105">The [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) functions, or the [**ReadConsole**](readconsole.md) and [**WriteConsole**](writeconsole.md) functions, enable an application to read console input and write console output as a stream of characters.</span></span> <span data-ttu-id="59239-106">**ReadConsole** e **WriteConsole** si comportano esattamente come **ReadFile** e **WriteFile** , ad eccezione del fatto che possono essere usati come funzioni a caratteri wide (in cui gli argomenti di testo devono usare Unicode) o come funzioni ANSI (in cui gli argomenti di testo devono usare caratteri del set di caratteri di Windows).</span><span class="sxs-lookup"><span data-stu-id="59239-106">**ReadConsole** and **WriteConsole** behave exactly like **ReadFile** and **WriteFile** except that they can be used either as wide-character functions (in which text arguments must use Unicode) or as ANSI functions (in which text arguments must use characters from the Windows character set).</span></span> <span data-ttu-id="59239-107">Le applicazioni che devono gestire un singolo set di origini per supportare Unicode o il set di caratteri ANSI devono usare **ReadConsole** e **WriteConsole**.</span><span class="sxs-lookup"><span data-stu-id="59239-107">Applications that need to maintain a single set of sources to support either Unicode or the ANSI character set should use **ReadConsole** and **WriteConsole**.</span></span>

<span data-ttu-id="59239-108">[**ReadConsole**](readconsole.md) e [**WriteConsole**](writeconsole.md) possono essere usati solo con gli handle della console. [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) e [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) possono essere usati con altri handle, ad esempio file o pipe.</span><span class="sxs-lookup"><span data-stu-id="59239-108">[**ReadConsole**](readconsole.md) and [**WriteConsole**](writeconsole.md) can only be used with console handles; [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) can be used with other handles (such as files or pipes).</span></span> <span data-ttu-id="59239-109">**ReadConsole** e **WriteConsole** hanno esito negativo se usato con un handle standard che è stato reindirizzato e non è più un handle della console.</span><span class="sxs-lookup"><span data-stu-id="59239-109">**ReadConsole** and **WriteConsole** fail if used with a standard handle that has been redirected and is no longer a console handle.</span></span>

<span data-ttu-id="59239-110">Per ottenere l'input da tastiera, un processo può usare [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) o [**ReadConsole**](readconsole.md) con un handle per il buffer di input della console oppure può usare **ReadFile** per leggere l'input da un file o una pipe se `STDIN` è stato reindirizzato.</span><span class="sxs-lookup"><span data-stu-id="59239-110">To get keyboard input, a process can use [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) or [**ReadConsole**](readconsole.md) with a handle to the console's input buffer, or it can use **ReadFile** to read input from a file or a pipe if `STDIN` has been redirected.</span></span> <span data-ttu-id="59239-111">Queste funzioni restituiscono solo eventi di tastiera che possono essere convertiti in caratteri ANSI o Unicode.</span><span class="sxs-lookup"><span data-stu-id="59239-111">These functions only return keyboard events that can be translated into ANSI or Unicode characters.</span></span> <span data-ttu-id="59239-112">L'input che può essere restituito include le combinazioni di tasti del controllo.</span><span class="sxs-lookup"><span data-stu-id="59239-112">The input that can be returned includes control key combinations.</span></span> <span data-ttu-id="59239-113">Le funzioni non restituiscono gli eventi della tastiera che coinvolgono i tasti funzione o i tasti di direzione.</span><span class="sxs-lookup"><span data-stu-id="59239-113">The functions do not return keyboard events involving the function keys or arrow keys.</span></span> <span data-ttu-id="59239-114">Gli eventi di input generati dal mouse, dalla finestra, dallo stato attivo o dall'input del menu vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="59239-114">Input events generated by mouse, window, focus, or menu input are discarded.</span></span>

<span data-ttu-id="59239-115">Se la modalità di input della riga è abilitata (modalità predefinita), [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) e [**ReadConsole**](readconsole.md) non ritornano all'applicazione chiamante fino a quando non viene premuto il tasto INVIO.</span><span class="sxs-lookup"><span data-stu-id="59239-115">If line input mode is enabled (the default mode), [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) and [**ReadConsole**](readconsole.md) do not return to the calling application until the ENTER key is pressed.</span></span> <span data-ttu-id="59239-116">Se la modalità di input della riga è disabilitata, le funzioni non restituiscono finché non è disponibile almeno un carattere.</span><span class="sxs-lookup"><span data-stu-id="59239-116">If line input mode is disabled, the functions do not return until at least one character is available.</span></span> <span data-ttu-id="59239-117">In entrambe le modalità, tutti i caratteri disponibili vengono letti fino a quando non sono disponibili altre chiavi o il numero di caratteri specificato è stato letto.</span><span class="sxs-lookup"><span data-stu-id="59239-117">In either mode, all available characters are read until either no more keys are available or the specified number of characters has been read.</span></span> <span data-ttu-id="59239-118">I caratteri non letti vengono memorizzati nel buffer fino alla successiva operazione di lettura.</span><span class="sxs-lookup"><span data-stu-id="59239-118">Unread characters are buffered until the next read operation.</span></span> <span data-ttu-id="59239-119">Le funzioni segnalano il numero totale di caratteri effettivamente letti.</span><span class="sxs-lookup"><span data-stu-id="59239-119">The functions report the total number of characters actually read.</span></span> <span data-ttu-id="59239-120">Se è abilitata la modalità di input echo, i caratteri letti da queste funzioni vengono scritti nel buffer dello schermo attivo nella posizione corrente del cursore.</span><span class="sxs-lookup"><span data-stu-id="59239-120">If echo input mode is enabled, characters read by these functions are written to the active screen buffer at the current cursor position.</span></span>

<span data-ttu-id="59239-121">Un processo può usare [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) o **WriteConsole** per scrivere in un buffer dello schermo attivo o inattivo oppure può usare **WriteFile** per scrivere in un file o una pipe se stdout è stato reindirizzato.</span><span class="sxs-lookup"><span data-stu-id="59239-121">A process can use [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) or **WriteConsole** to write to either an active or inactive screen buffer, or it can use **WriteFile** to write to a file or a pipe if STDOUT has been redirected.</span></span> <span data-ttu-id="59239-122">La modalità di output elaborata e il wrapping in modalità di output EOL controllano il modo in cui i caratteri vengono scritti o restituiti a un buffer dello schermo.</span><span class="sxs-lookup"><span data-stu-id="59239-122">Processed output mode and wrap at EOL output mode control the way characters are written or echoed to a screen buffer.</span></span>

<span data-ttu-id="59239-123">I caratteri scritti da [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) o [**WriteConsole**](writeconsole.md), o restituiti da [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) o [**ReadConsole**](readconsole.md), vengono inseriti in un buffer dello schermo in corrispondenza della posizione corrente del cursore.</span><span class="sxs-lookup"><span data-stu-id="59239-123">Characters written by [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) or [**WriteConsole**](writeconsole.md), or echoed by [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) or [**ReadConsole**](readconsole.md), are inserted in a screen buffer at the current cursor position.</span></span> <span data-ttu-id="59239-124">Quando viene scritto ogni carattere, la posizione del cursore passa alla cella del carattere successivo. Tuttavia, il comportamento alla fine di una riga dipende dal wrapping del buffer dello schermo della console alla modalità di output EOL.</span><span class="sxs-lookup"><span data-stu-id="59239-124">As each character is written, the cursor position advances to the next character cell; however, the behavior at the end of a row depends on the console screen buffer's wrap at EOL output mode.</span></span>

<span data-ttu-id="59239-125">Per ulteriori dettagli sulla posizione del cursore, è possibile usare le **[sequenze di terminali virtuali](console-virtual-terminal-sequences.md)**, in particolare nella categoria **[stato query](console-virtual-terminal-sequences.md#query-state)** , per trovare la posizione corrente e la categoria **[posizionamento cursore](console-virtual-terminal-sequences.md#cursor-positioning)** per l'impostazione della posizione corrente.</span><span class="sxs-lookup"><span data-stu-id="59239-125">Further detail about the position of the cursor can be found through **[virtual terminals sequences](console-virtual-terminal-sequences.md)**, specifically in the **[query state](console-virtual-terminal-sequences.md#query-state)** category for finding the current position and the **[cursor positioning](console-virtual-terminal-sequences.md#cursor-positioning)** category for setting the current position.</span></span> <span data-ttu-id="59239-126">In alternativa, un'applicazione può utilizzare la funzione [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) per determinare la posizione corrente del cursore e la funzione [**SetConsoleCursorPosition**](setconsolecursorposition.md) per impostare la posizione del cursore.</span><span class="sxs-lookup"><span data-stu-id="59239-126">Alternatively, an application can use the [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) function to determine the current cursor position and the [**SetConsoleCursorPosition**](setconsolecursorposition.md) function to set the cursor position.</span></span> <span data-ttu-id="59239-127">Tuttavia, il meccanismo delle **sequenze di terminali virtuali** è preferibile per lo sviluppo nuovo e continuo.</span><span class="sxs-lookup"><span data-stu-id="59239-127">However, the **virtual terminal sequences** mechanism is preferred for all new and ongoing development.</span></span> <span data-ttu-id="59239-128">Per ulteriori informazioni sulla strategia alla base di questa decisione, vedere la documentazione relativa alle **[funzioni classiche rispetto](classic-vs-vt.md)** alla guida alla roadmap per gli **[ecosistemi](ecosystem-roadmap.md)** e ai terminali virtuali.</span><span class="sxs-lookup"><span data-stu-id="59239-128">More details on the strategy behind this decision can be found in the **[classic functions versus virtual terminal](classic-vs-vt.md)** and **[ecosystem roadmap](ecosystem-roadmap.md)** documentation.</span></span>

<span data-ttu-id="59239-129">Per un esempio in cui vengono utilizzate le funzioni di I/O della console di alto livello, vedere [utilizzo delle funzioni di input e Output High-Level](using-the-high-level-input-and-output-functions.md).</span><span class="sxs-lookup"><span data-stu-id="59239-129">For an example that uses the high-level console I/O functions, see [Using the High-Level Input and Output Functions](using-the-high-level-input-and-output-functions.md).</span></span>