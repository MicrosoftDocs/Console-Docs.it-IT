---
title: Confronto tra API di console classica e sequenze di terminale virtuale
description: Confronta la superficie dell'API della console Win32 classica e il concetto di sequenze di terminale virtuale, talvolta note anche come sequenze di escape, per la scrittura di applicazioni da riga di comando.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: console, terminale, terminale virtuale, sequenze di escape, vt, vt100, api della console
ms.prod: console
ms.localizationpriority: high
ms.openlocfilehash: 541300b50521909b22ceaccb595f1945fbfc7e6d
ms.sourcegitcommit: 508e93bc83b4bca6ce678f88ab081d66b95d605c
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 12/04/2020
ms.locfileid: "96420180"
---
# <a name="classic-console-apis-versus-virtual-terminal-sequences"></a><span data-ttu-id="aa060-104">Confronto tra API di console classica e sequenze di terminale virtuale</span><span class="sxs-lookup"><span data-stu-id="aa060-104">Classic Console APIs versus Virtual Terminal Sequences</span></span>

<span data-ttu-id="aa060-105">Si consiglia di sostituire l'**API della console di Windows** classica con le **sequenze di terminale virtuale**.</span><span class="sxs-lookup"><span data-stu-id="aa060-105">Our recommendation is to replace the classic **Windows Console API** with **virtual terminal sequences**.</span></span> <span data-ttu-id="aa060-106">Questo articolo illustra la differenza tra i due elementi e i motivi del consiglio proposto.</span><span class="sxs-lookup"><span data-stu-id="aa060-106">This article will outline the difference between the two and discuss the reasons for our recommendation.</span></span>

## <a name="definitions"></a><span data-ttu-id="aa060-107">Definizioni</span><span class="sxs-lookup"><span data-stu-id="aa060-107">Definitions</span></span>

<span data-ttu-id="aa060-108">La superficie dell' **[API della console di Windows classica](console-functions.md)** è definita come serie di interfacce funzionali del linguaggio C in `kernel32.dll` con il termine "console" nel nome.</span><span class="sxs-lookup"><span data-stu-id="aa060-108">The classic **[Windows Console API](console-functions.md)** surface is defined as the series of C language functional interfaces on `kernel32.dll` with "Console" in the name.</span></span>

<span data-ttu-id="aa060-109">Le **[sequenze di terminale virtuale](console-virtual-terminal-sequences.md)** sono definite come linguaggio di comandi incorporati nei flussi di input e output standard.</span><span class="sxs-lookup"><span data-stu-id="aa060-109">**[Virtual terminal sequences](console-virtual-terminal-sequences.md)** is defined as a language of commands that's embedded in the standard input and standard output streams.</span></span> <span data-ttu-id="aa060-110">Le sequenze di terminale virtuale usano caratteri di escape non stampabili per i comandi di segnalazione interfogliati con testo stampabile normale.</span><span class="sxs-lookup"><span data-stu-id="aa060-110">Virtual terminal sequences use non-printable escape characters for signaling commands interleaved with normal printable text.</span></span>

## <a name="history"></a><span data-ttu-id="aa060-111">Cronologia</span><span class="sxs-lookup"><span data-stu-id="aa060-111">History</span></span>

<span data-ttu-id="aa060-112">La **console di Windows** fornisce un'ampia superficie di API per le applicazioni da riga di comando client per modificare sia il buffer di visualizzazione dell'output che il buffer di input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="aa060-112">The **Windows Console** provides a broad API surface for client command-line applications to manipulate both the output display buffer and the user input buffer.</span></span> <span data-ttu-id="aa060-113">Altre piattaforme non Windows, tuttavia, non hanno mai concesso questo approccio specifico basato su API ai propri ambienti da riga di comando, optando invece per sequenze di terminale virtuale incorporate nei flussi di input e output standard.</span><span class="sxs-lookup"><span data-stu-id="aa060-113">However, other non-Windows platforms have never afforded this specific API-driven approach to their command-line environments, choosing instead to use virtual terminal sequences embedded within the standard input and standard output streams.</span></span> <span data-ttu-id="aa060-114">*Per un certo periodo, Microsoft ha supportato questo comportamento anche nelle prime edizioni di DOS e Windows tramite un driver denominato ANSI.SYS.*</span><span class="sxs-lookup"><span data-stu-id="aa060-114">*(For a time, Microsoft supported this behavior too in early editions of DOS and Windows through a driver called ANSI.SYS.)*</span></span>

<span data-ttu-id="aa060-115">Le **sequenze di terminale virtuale** (in un'ampia gamma di dialetti) supportano invece le operazioni dell'ambiente da riga di comando per tutte le altre piattaforme.</span><span class="sxs-lookup"><span data-stu-id="aa060-115">By contrast, **virtual terminal sequences** (in a variety of dialects) drive the command-line environment operations for  all other platforms.</span></span> <span data-ttu-id="aa060-116">Queste sequenze sono radicate in uno [standard ECMA](https://www.ecma-international.org/publications/standards/Ecma-048.htm) e in una serie di estensioni di molti fornitori che eseguono il tracciamento dei terminali di Digital Equipment Corporation e Tektronix, fino a terminali software più moderni e comuni, come [xterm](https://invisible-island.net/xterm/).</span><span class="sxs-lookup"><span data-stu-id="aa060-116">These sequences are rooted in an [ECMA Standard](https://www.ecma-international.org/publications/standards/Ecma-048.htm) and series of extensions by many vendors tracing back to Digital Equipment Corporation and Tektronix terminals, through to more modern and common software terminals, like [xterm](https://invisible-island.net/xterm/).</span></span> <span data-ttu-id="aa060-117">Molte estensioni sono disponibili nel dominio della sequenza di terminale virtuale e alcune sequenze sono più diffuse rispetto ad altre, ma è possibile affermare che questo è il linguaggio di comando standard a livello globale per le esperienze da riga di comando con un subset noto supportato praticamente da qualsiasi terminale e applicazione client da riga di comando.</span><span class="sxs-lookup"><span data-stu-id="aa060-117">Many extensions exist within the virtual terminal sequence domain and some sequences are more widely supported than others, but it is safe to say that the world has standardized on this as the command language for command-line experiences with a well-known subset being supported by virtually every terminal and command-line client application.</span></span>

## <a name="cross-platform-support"></a><span data-ttu-id="aa060-118">Supporto multipiattaforma</span><span class="sxs-lookup"><span data-stu-id="aa060-118">Cross-Platform Support</span></span>

<span data-ttu-id="aa060-119">Le **sequenze di terminale virtuale** sono supportate in modalità nativa tra piattaforme, rendendo le applicazioni di terminale e le utilità da riga di comando facilmente portabili tra le versioni e le varianti dei sistemi operativi, ad eccezione di Windows.</span><span class="sxs-lookup"><span data-stu-id="aa060-119">**Virtual terminal sequences** are natively supported across platforms, making terminal applications and command-line utilities easily portable between versions and variations of operating systems, with the exception of Windows.</span></span>

<span data-ttu-id="aa060-120">Le **API della console di Windows**, invece, sono supportate solo in Windows.</span><span class="sxs-lookup"><span data-stu-id="aa060-120">By contrast, **Windows Console APIs** are only supported on Windows.</span></span> <span data-ttu-id="aa060-121">Quando si tenta di trasferire le utilità da riga di comando da una piattaforma a un'altra, è necessario scrivere una libreria di traduzione o un adattatore completo tra Windows e il terminale virtuale, o viceversa.</span><span class="sxs-lookup"><span data-stu-id="aa060-121">An extensive adapter or translation library must be written between Windows and virtual terminal, or vice-versa, when attempting to port command-line utilities from one platform or another.</span></span>

### <a name="remote-access"></a><span data-ttu-id="aa060-122">Accesso remoto</span><span class="sxs-lookup"><span data-stu-id="aa060-122">Remote Access</span></span>

<span data-ttu-id="aa060-123">Le **sequenze di terminale virtuale** contengono un vantaggio importante per l'accesso remoto.</span><span class="sxs-lookup"><span data-stu-id="aa060-123">**Virtual terminal sequences** hold a major advantage for remote access.</span></span> <span data-ttu-id="aa060-124">Non richiedono operazioni aggiuntive per il trasporto o l'esecuzione di Remote Procedure Call oltre a quelle richieste per configurare una connessione remota standard da riga di comando.</span><span class="sxs-lookup"><span data-stu-id="aa060-124">They require no additional work to transport, or perform remote procedure calls, over what is required to set up a standard remote command-line connection.</span></span> <span data-ttu-id="aa060-125">La semplice connessione di un canale di trasporto in uscita e in entrata (o un canale bidirezionale singolo) su una pipe, un socket, un file, una porta seriale o qualsiasi altro dispositivo è sufficiente per trasferire completamente tutte le informazioni necessarie per un'applicazione che comunica queste sequenze a un host remoto.</span><span class="sxs-lookup"><span data-stu-id="aa060-125">Simply connecting an outbound and an inbound transport channel (or a single bidirectional channel) over a pipe, socket, file, serial port, or any other device is sufficient to completely carry all information required for an application speaking these sequences to a remote host.</span></span>

<span data-ttu-id="aa060-126">Le **API della console di Windows**, invece, risultano accessibili solo sul computer locale e qualsiasi tentativo di eseguirne la modalità remota comporta la necessità di creare un intero livello di interfaccia di chiamata e trasporto remoto oltre a un semplice canale.</span><span class="sxs-lookup"><span data-stu-id="aa060-126">On the contrary, the **Windows Console APIs** have only been accessible on the local machine and all efforts to remote them would require building an entire remote calling and transport interface layer beyond just a simple channel.</span></span>

### <a name="separation-of-concerns"></a><span data-ttu-id="aa060-127">Separazione delle problematiche</span><span class="sxs-lookup"><span data-stu-id="aa060-127">Separation of Concerns</span></span>

<span data-ttu-id="aa060-128">Alcune **API della console di Windows** forniscono accesso di basso livello ai buffer di input e output o alle funzioni di convenienza per le righe di comando interattive.</span><span class="sxs-lookup"><span data-stu-id="aa060-128">Some **Windows Console APIs** provide low-level access to the input and output buffers or convenience functions for interactive command-lines.</span></span> <span data-ttu-id="aa060-129">Questo potrebbe includere gli alias e la cronologia dei comandi programmati nel sottosistema della console e nell'ambiente host, anziché all'interno dell'applicazione client da riga di comando.</span><span class="sxs-lookup"><span data-stu-id="aa060-129">This might include aliases and command history programmed within the console subsystem and host environment, instead of within the command-line client application itself.</span></span>

<span data-ttu-id="aa060-130">In **altre piattaforme**, invece, la memorizzazione dello stato corrente dell'applicazione e della funzionalità di convenienza è responsabilità dell'utilità da riga di comando o della shell stessa.</span><span class="sxs-lookup"><span data-stu-id="aa060-130">By contrast, **other platforms** make memory of the current state of the application and convenience functionality the responsibility of the command-line utility or shell itself.</span></span>

<span data-ttu-id="aa060-131">Poiché la **console di Windows** gestisce questa responsabilità nell'host e nell'API della console la scrittura di un'applicazione da riga di comando con queste funzionalità risulta più semplice e veloce ed elimina il problema di dover ricordare lo stato del disegno o la gestione delle funzionalità di convenienza per la modifica.</span><span class="sxs-lookup"><span data-stu-id="aa060-131">The **Windows Console** way of handling this responsibility in the console host and API makes it quicker and easier to write a command-line application with these features, removing the responsibility of remembering drawing state or handling editing convenience features.</span></span> <span data-ttu-id="aa060-132">In questo modo, tuttavia, è quasi impossibile connettere le attività in modalità remota tra piattaforme, versioni o scenari, a causa delle variazioni delle implementazioni e della disponibilità.</span><span class="sxs-lookup"><span data-stu-id="aa060-132">However, this makes it nearly impossible to connect those activities remotely across platforms, versions, or scenarios due to variations in implementations and availability.</span></span> <span data-ttu-id="aa060-133">Questo metodo di gestione della responsabilità rende anche l'esperienza interattiva finale di queste applicazioni da riga di comando di Windows completamente dipendente dall'implementazione, dalle priorità e dal ciclo di rilascio dell'host della console.</span><span class="sxs-lookup"><span data-stu-id="aa060-133">This way of handling responsibility also makes the final interactive experience of these Windows command-line applications completely dependent on the console host's implementation, priorities, and release cycle.</span></span>

<span data-ttu-id="aa060-134">Ad esempio, le funzionalità avanzate di modifica della linea, come l'evidenziazione della sintassi e la selezione complessa, sono possibili solo quando un'applicazione da riga di comando gestisce i problemi di modifica.</span><span class="sxs-lookup"><span data-stu-id="aa060-134">For example, advanced line editing features, like syntax highlighting and complex selection, are only possible when a command-line application handles editing concerns itself.</span></span> <span data-ttu-id="aa060-135">La console non può disporre di un contesto sufficiente alla comprensione completa di questi scenari. Capacità invece propria dell'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="aa060-135">The console could never have enough context to fully understand these scenarios in a broad manner like the client application can.</span></span>

<span data-ttu-id="aa060-136">Altre piattaforme usano, invece, le **sequenze di terminale virtuale** per gestire queste attività e la comunicazione del terminale virtuale tramite librerie lato client riutilizzabili, ad esempio [readline](https://tiswww.case.edu/php/chet/readline/rltop.html) e [ncurses](https://invisible-island.net/ncurses/ncurses.html).</span><span class="sxs-lookup"><span data-stu-id="aa060-136">By contrast, other platforms use **virtual terminal sequences** to handle these activities and virtual terminal communication itself through reusable client-side libraries, like [readline](https://tiswww.case.edu/php/chet/readline/rltop.html) and [ncurses](https://invisible-island.net/ncurses/ncurses.html).</span></span> <span data-ttu-id="aa060-137">Il terminale finale è responsabile solo della visualizzazione delle informazioni e della ricezione dell'input tramite il canale di comunicazione bidirezionale.</span><span class="sxs-lookup"><span data-stu-id="aa060-137">The final terminal is only responsible for displaying information and receiving input through that bidirectional communication channel.</span></span>

### <a name="wrong-way-verbs"></a><span data-ttu-id="aa060-138">Verbi in modo errato</span><span class="sxs-lookup"><span data-stu-id="aa060-138">Wrong-Way Verbs</span></span>

<span data-ttu-id="aa060-139">Con la **console di Windows**, alcune azioni possono essere eseguite nella direzione opposta a quella naturale sui flussi di input e output.</span><span class="sxs-lookup"><span data-stu-id="aa060-139">With **Windows Console**, some actions can be performed in the opposite-to-natural direction on the input and output streams.</span></span> <span data-ttu-id="aa060-140">Questo consente alle applicazioni da riga di comando di Windows di evitare il problema di gestire i propri buffer.</span><span class="sxs-lookup"><span data-stu-id="aa060-140">This allows Windows command-line applications to avoid the concern of managing their own buffers.</span></span> <span data-ttu-id="aa060-141">Consente inoltre alle app da riga di comando di Windows di eseguire operazioni avanzate, ad esempio simulando/inserendo input per conto di un utente o leggendo parte della cronologia degli elementi scritti.</span><span class="sxs-lookup"><span data-stu-id="aa060-141">It also allows Windows command-line apps to perform advanced operations, like simulating/injecting input on behalf of a user, or reading back some of the history of what was written.</span></span>

<span data-ttu-id="aa060-142">Sebbene in questo modo si fornisca ulteriore potenziale alle applicazioni Windows che operano in un contesto utente specifico in un singolo computer, si fornisce anche un vettore per valicare livelli di sicurezza e privilegi o domini se usati in determinati scenari.</span><span class="sxs-lookup"><span data-stu-id="aa060-142">While this provides additional power to Windows applications operating in a specific user-context on a single machine, it also provides a vector to cross security and privilege-levels or domains when used in certain scenarios.</span></span> <span data-ttu-id="aa060-143">Questi scenari includono il funzionamento tra contesti nello stesso computer o tra contesti in un altro computer o ambiente.</span><span class="sxs-lookup"><span data-stu-id="aa060-143">Such scenarios include operating between contexts on the same machine, or across contexts to another machine or environment.</span></span>

<span data-ttu-id="aa060-144">Altre piattaforme, che usano le **sequenze di terminale virtuale**, non consentono questa attività.</span><span class="sxs-lookup"><span data-stu-id="aa060-144">Other platforms, which use **virtual terminal sequences**, do not allow this activity.</span></span> <span data-ttu-id="aa060-145">Pertanto, il consiglio di eseguire la transizione dalla console di Windows classica alle sequenze di terminale virtuale è finalizzato a convergere con questa strategia sia per motivi di interoperabilità che di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="aa060-145">The intent of our recommendation to transition from classic Windows Console to virtual terminal sequences is to converge with this strategy for both interoperability and security reasons.</span></span>

### <a name="direct-window-access"></a><span data-ttu-id="aa060-146">Accesso diretto alla finestra</span><span class="sxs-lookup"><span data-stu-id="aa060-146">Direct Window Access</span></span>

<span data-ttu-id="aa060-147">La **superficie dell'API della console di Windows** fornisce l'handle della finestra specifico per la finestra di hosting.</span><span class="sxs-lookup"><span data-stu-id="aa060-147">**Windows Console API surface** provides the exact window handle to the hosting window.</span></span> <span data-ttu-id="aa060-148">Questo consente a un'utilità da riga di comando di eseguire operazioni di finestra avanzate raggiungendo l'ampia gamma di API Win32 consentite in un handle della finestra.</span><span class="sxs-lookup"><span data-stu-id="aa060-148">This allows a command-line utility to perform advanced window operations by reaching into the wide gamut of Win32 APIs permitted against a window handle.</span></span> <span data-ttu-id="aa060-149">Queste API Win32 possono modificare lo stato della finestra, il frame, l'icona o altre proprietà della finestra.</span><span class="sxs-lookup"><span data-stu-id="aa060-149">These Win32 APIs can manipulate the window state, frame, icon, or other properties about the window.</span></span>

<span data-ttu-id="aa060-150">Su altre piattaforme, invece, con le **sequenze di terminale virtuale**, è possibile eseguire una serie di comandi limitati sulla finestra.</span><span class="sxs-lookup"><span data-stu-id="aa060-150">By contrast, on other platforms with **virtual terminal sequences**, there is a narrow set of commands that can be performed against the window.</span></span> <span data-ttu-id="aa060-151">Questi comandi possono eseguire operazioni quali la modifica delle dimensioni della finestra o del titolo visualizzato, ma devono essere eseguite nella stessa banda e sotto lo stesso controllo del resto del flusso.</span><span class="sxs-lookup"><span data-stu-id="aa060-151">These commands can do things like changing the window size or displayed title, but they must be done in the same band and under the same control as the remainder of the stream.</span></span>

<span data-ttu-id="aa060-152">Man mano che Windows si è evoluto, i controlli di sicurezza e le restrizioni sugli handle della finestra sono aumentati.</span><span class="sxs-lookup"><span data-stu-id="aa060-152">As Windows has evolved, the security controls and restrictions on window handles have increased.</span></span> <span data-ttu-id="aa060-153">Inoltre, la natura e l'esistenza di un handle della finestra indirizzabile all'applicazione su qualsiasi elemento dell'interfaccia utente specifico si sono evolute, soprattutto con l'aumento del supporto di piattaforme e fattori di forma del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="aa060-153">Additionally, the nature and existence of an application-addressable window handle on any specific user interface element has evolved, especially with the increased support of device form factors and platforms.</span></span> <span data-ttu-id="aa060-154">In questo modo, l'accesso diretto alla finestra per le applicazioni da riga di comando diventa fragile nel momento in cui la piattaforma e le esperienze mutano.</span><span class="sxs-lookup"><span data-stu-id="aa060-154">This makes direct window access to command-line applications fragile as the platform and experiences evolve.</span></span>

### <a name="unicode"></a><span data-ttu-id="aa060-155">Unicode</span><span class="sxs-lookup"><span data-stu-id="aa060-155">Unicode</span></span>

<span data-ttu-id="aa060-156">UTF-8 è la codifica accettata per i dati Unicode in quasi tutte le piattaforme moderne, in quanto rappresenta il giusto equilibrio tra portabilità, dimensioni di archiviazione e tempo di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="aa060-156">UTF-8 is the accepted encoding for Unicode data across almost all modern platforms, as it strikes the right balance between portability, storage size and processing time.</span></span> <span data-ttu-id="aa060-157">Tuttavia, Windows ha scelto in passato UTF-16 come codifica primaria per i dati Unicode.</span><span class="sxs-lookup"><span data-stu-id="aa060-157">However, Windows historically chose UTF-16 as its primary encoding for Unicode data.</span></span> <span data-ttu-id="aa060-158">Il supporto per UTF-8 è in aumento in Windows e l'uso di questi formati Unicode non impedisce l'utilizzo di altre codifiche.</span><span class="sxs-lookup"><span data-stu-id="aa060-158">Support for UTF-8 is increasing in Windows and use of these Unicode formats does not preclude the usage of other encodings.</span></span>

<span data-ttu-id="aa060-159">La piattaforma della **console di Windows** è supportata e continuerà a supportare tutte le tabelle codici e le codifiche esistenti.</span><span class="sxs-lookup"><span data-stu-id="aa060-159">The **Windows Console** platform has supported and will continue to support all existing code pages and encodings.</span></span> <span data-ttu-id="aa060-160">Se necessario, usare la codifica UTF-16 per la massima compatibilità tra le versioni di Windows ed eseguire la conversione algoritmica con UTF-8.</span><span class="sxs-lookup"><span data-stu-id="aa060-160">Use UTF-16 for maximum compatibility across Windows versions and perform algorithmic translation with UTF-8 if necessary.</span></span> <span data-ttu-id="aa060-161">È in corso un miglioramento del supporto di UTF-8 per il sistema della console.</span><span class="sxs-lookup"><span data-stu-id="aa060-161">Increased support of UTF-8 is in progress for the console system.</span></span>

<span data-ttu-id="aa060-162">Il supporto UTF-16 nella console può essere usato senza alcuna configurazione aggiuntiva tramite la variante _W_ di tutte le API della console ed è una scelta più probabile per le applicazioni già in formato UTF-16 attraverso la comunicazione con `wchar_t` e la variante _W_ di altri prodotti e funzioni della piattaforma Microsoft e Windows.</span><span class="sxs-lookup"><span data-stu-id="aa060-162">UTF-16 support in the console can be utilized with no additional configuration via the _W_ variant of all console APIs and is a more likely choice for applications already well versed in UTF-16 through communication with the `wchar_t` and _W_ variant of other Microsoft and Windows platform functions and products.</span></span>

<span data-ttu-id="aa060-163">Il supporto UTF-8 nella console può essere usato tramite la variante _A_ delle API della console per gli handle della console, dopo aver impostato la tabella codici su `65001` o `CP_UTF8` con i metodi [**SetConsoleOutputCP**](setconsoleoutputcp.md) e [**SetConsoleCP**](setconsolecp.md), a seconda dei casi.</span><span class="sxs-lookup"><span data-stu-id="aa060-163">UTF-8 support in the console can be utilized via the _A_ variant of Console APIs against console handles after setting the codepage to `65001` or `CP_UTF8` with the [**SetConsoleOutputCP**](setconsoleoutputcp.md) and [**SetConsoleCP**](setconsolecp.md) methods, as appropriate.</span></span> <span data-ttu-id="aa060-164">L'impostazione delle tabelle codici in anticipo è necessaria solo se il computer non ha scelto "Use Unicode UTF-8 for worldwide language support" (Usa Unicode UTF-8 per il supporto linguistico internazionale) nelle impostazioni per le applicazioni non Unicode nella sezione Area geografica del pannello di controllo.</span><span class="sxs-lookup"><span data-stu-id="aa060-164">Setting the code pages in advance is only necessary if the machine has not chosen "Use Unicode UTF-8 for worldwide language support" in the settings for Non-Unicode applications in the Region section of the Control Panel.</span></span>

>[!NOTE]
> <span data-ttu-id="aa060-165">Al momento, UTF-8 è supportato completamente nel flusso di output standard con i metodi [**WriteConsole**](writeconsole.md) e [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747).</span><span class="sxs-lookup"><span data-stu-id="aa060-165">As of now, UTF-8 is supported fully on the standard output stream with the [**WriteConsole**](writeconsole.md) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) methods.</span></span> <span data-ttu-id="aa060-166">Il supporto per il flusso di input varia a seconda della modalità di input e continuerà a migliorare nel tempo.</span><span class="sxs-lookup"><span data-stu-id="aa060-166">Support on the input stream varies depending on the input mode and will continue to improve over time.</span></span> <span data-ttu-id="aa060-167">In particolare, le modalità **["cooked"](high-level-console-modes.md)** predefinite nell'input non supportano ancora completamente UTF-8.</span><span class="sxs-lookup"><span data-stu-id="aa060-167">Notably the default **["cooked"](high-level-console-modes.md)** modes on input do not fully support UTF-8 yet.</span></span> <span data-ttu-id="aa060-168">Lo stato corrente di questa attività è disponibile in [**microsoft/terminal#7777**](https://github.com/microsoft/terminal/issues/7777) su GitHub.</span><span class="sxs-lookup"><span data-stu-id="aa060-168">The current status of this work can be found at [**microsoft/terminal#7777**](https://github.com/microsoft/terminal/issues/7777) on GitHub.</span></span> <span data-ttu-id="aa060-169">La soluzione alternativa consiste nell'usare il formato UTF-16 traducibile algoritmicamente per leggere l'input tramite [**ReadConsoleW**](readconsole.md) o [**ReadConsoleInputW**](readconsoleinput.md) fino a quando non vengono risolti i problemi in attesa.</span><span class="sxs-lookup"><span data-stu-id="aa060-169">The workaround is to use the algorithmically-translatable UTF-16 for reading input through [**ReadConsoleW**](readconsole.md) or [**ReadConsoleInputW**](readconsoleinput.md) until the outstanding issues are resolved.</span></span>

## <a name="recommendations"></a><span data-ttu-id="aa060-170">Consigli</span><span class="sxs-lookup"><span data-stu-id="aa060-170">Recommendations</span></span>

<span data-ttu-id="aa060-171">Per le attività di sviluppo nuove e in corso in Windows, **si consiglia l'uso delle sequenze di terminale virtuale** come modalità di interazione con il terminale.</span><span class="sxs-lookup"><span data-stu-id="aa060-171">For all new and ongoing development on Windows, **virtual terminal sequences are recommended** as the way of interacting with the terminal.</span></span> <span data-ttu-id="aa060-172">In questo modo, le applicazioni client da riga di comando di Windows convergeranno con lo stile di programmazione dell'applicazione in tutte le altre piattaforme.</span><span class="sxs-lookup"><span data-stu-id="aa060-172">This will converge Windows command-line client applications with the style of application programming on all other platforms.</span></span>

### <a name="exceptions-for-using-windows-console-apis"></a><span data-ttu-id="aa060-173">Eccezioni per l'uso delle API della console di Windows</span><span class="sxs-lookup"><span data-stu-id="aa060-173">Exceptions for using Windows Console APIs</span></span>

<span data-ttu-id="aa060-174">Per stabilire l'ambiente iniziale, **è ancora necessario un subset limitato di API della console di Windows**.</span><span class="sxs-lookup"><span data-stu-id="aa060-174">A **limited subset of Windows Console APIs is still necessary** to establish the initial environment.</span></span> <span data-ttu-id="aa060-175">La piattaforma Windows è ancora diversa dalle altre in termini di elaborazione, segnalazione, dispositivo e gestione della codifica:</span><span class="sxs-lookup"><span data-stu-id="aa060-175">The Windows platform still differs from others in process, signal, device, and encoding handling:</span></span>

- <span data-ttu-id="aa060-176">Gli handle standard per un processo verranno comunque controllati con **[GetStdHandle](getstdhandle.md)** e **[SetStdHandle](setstdhandle.md)** .</span><span class="sxs-lookup"><span data-stu-id="aa060-176">The standard handles to a process will still be controlled with **[GetStdHandle](getstdhandle.md)** and **[SetStdHandle](setstdhandle.md)**.</span></span>

- <span data-ttu-id="aa060-177">La configurazione delle modalità della console su un handle per acconsentire esplicitamente al supporto della sequenza di terminale virtuale verrà gestita con **[GetConsoleMode](getconsolemode.md)** e **[SetConsoleMode](setconsolemode.md)** .</span><span class="sxs-lookup"><span data-stu-id="aa060-177">Configuration of the console modes on a handle to opt in to Virtual Terminal Sequence support will be handled with **[GetConsoleMode](getconsolemode.md)** and **[SetConsoleMode](setconsolemode.md)**.</span></span>

- <span data-ttu-id="aa060-178">La dichiarazione di supporto della tabella codici o della codifica UTF-8 viene eseguita con i metodi [**SetConsoleOutputCP**](setconsoleoutputcp.md) e [**SetConsoleCP**](setconsolecp.md).</span><span class="sxs-lookup"><span data-stu-id="aa060-178">Declaration of code page or UTF-8 support is conducted with [**SetConsoleOutputCP**](setconsoleoutputcp.md) and [**SetConsoleCP**](setconsolecp.md) methods.</span></span>

- <span data-ttu-id="aa060-179">Può essere necessario un certo livello di gestione complessiva dei processi con [**AllocConsole**](allocconsole.md), [**AttachConsole**](attachconsole.md) e [**FreeConsole**](freeconsole.md) per partecipare o uscire da una sessione del dispositivo console.</span><span class="sxs-lookup"><span data-stu-id="aa060-179">Some level of overall process management may be required with the [**AllocConsole**](allocconsole.md), [**AttachConsole**](attachconsole.md) and [**FreeConsole**](freeconsole.md) to join or leave a console device session.</span></span>

- <span data-ttu-id="aa060-180">I segnali e la gestione dei segnali continueranno a essere eseguiti con [**SetConsoleCtrlHandler**](setconsolectrlhandler.md), [**HandlerRoutine**](handlerroutine.md) e [**GenerateConsoleCtrlEvent**](generateconsolectrlevent.md).</span><span class="sxs-lookup"><span data-stu-id="aa060-180">Signals and signal handling will continue to be conducted with [**SetConsoleCtrlHandler**](setconsolectrlhandler.md), [**HandlerRoutine**](handlerroutine.md), and [**GenerateConsoleCtrlEvent**](generateconsolectrlevent.md).</span></span>

- <span data-ttu-id="aa060-181">La comunicazione con gli handle del dispositivo console può essere eseguita con [**WriteConsole**](writeconsole.md) e [**ReadConsole**](readconsole.md).</span><span class="sxs-lookup"><span data-stu-id="aa060-181">Communication with the console device handles can be conducted with [**WriteConsole**](writeconsole.md) and [**ReadConsole**](readconsole.md).</span></span> <span data-ttu-id="aa060-182">Queste funzioni possono essere usate anche tramite i runtime del linguaggio di programmazione nei formati: - Runtime C (CRT): [I/O di flusso](https://docs.microsoft.com/cpp/c-runtime-library/stream-i-o) come **printf**, **scanf**, **putc**, **getc** o [altri livelli di funzioni di I/O](https://docs.microsoft.com/cpp/c-runtime-library/input-and-output).</span><span class="sxs-lookup"><span data-stu-id="aa060-182">These may also be leveraged through programming language runtimes in the forms of: - C Runtime (CRT): [Stream I/O](https://docs.microsoft.com/cpp/c-runtime-library/stream-i-o) like **printf**, **scanf**, **putc**, **getc**, or [other levels of I/O functions](https://docs.microsoft.com/cpp/c-runtime-library/input-and-output).</span></span>
        <span data-ttu-id="aa060-183">- Libreria standard C++ (STL): [I/O di flusso](https://docs.microsoft.com/cpp/standard-library/iostream) come **cout** e **cin**.</span><span class="sxs-lookup"><span data-stu-id="aa060-183">- C++ Standard Library (STL): [iostream](https://docs.microsoft.com/cpp/standard-library/iostream) like **cout** and **cin**.</span></span>
        <span data-ttu-id="aa060-184">- Runtime .NET: [System.Console](https://docs.microsoft.com/dotnet/api/system.console) come **Console.WriteLine**.</span><span class="sxs-lookup"><span data-stu-id="aa060-184">- .NET Runtime: [System.Console](https://docs.microsoft.com/dotnet/api/system.console) like **Console.WriteLine**.</span></span>

- <span data-ttu-id="aa060-185">Le applicazioni che devono essere a conoscenza delle modifiche alle dimensioni della finestra dovranno comunque usare [**ReadConsoleInput**](readconsoleinput.md) per riceverle interfogliate con gli eventi principali, in quanto la sola funzione **ReadConsole** le eliminerà.</span><span class="sxs-lookup"><span data-stu-id="aa060-185">Applications that must be aware of window size changes will still need to use [**ReadConsoleInput**](readconsoleinput.md) to receive them interleaved with key events as **ReadConsole** alone will discard them.</span></span>

- <span data-ttu-id="aa060-186">La ricerca delle dimensioni della finestra deve comunque essere eseguita con [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) per le applicazioni che tentano di creare colonne, griglie o riempire la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="aa060-186">Finding the window size must still be performed with [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) for applications attempting to draw columns, grids, or fill the display.</span></span> <span data-ttu-id="aa060-187">Le dimensioni della finestra e del buffer corrisponderanno in una sessione di [pseudoconsole](pseudoconsoles.md).</span><span class="sxs-lookup"><span data-stu-id="aa060-187">Window and buffer size will match in a [pseudoconsole](pseudoconsoles.md) session.</span></span>

## <a name="future-planning-and-pseudoconsole"></a><span data-ttu-id="aa060-188">Pianificazione futura e pseudoconsole</span><span class="sxs-lookup"><span data-stu-id="aa060-188">Future planning and pseudoconsole</span></span>

<span data-ttu-id="aa060-189">Non è prevista la rimozione delle API della console di Windows dalla piattaforma.</span><span class="sxs-lookup"><span data-stu-id="aa060-189">There are no plans to remove the Windows console APIs from the platform.</span></span>

<span data-ttu-id="aa060-190">Al contrario, l'host della console di Windows ha fornito la tecnologia **[pseudoconsole](pseudoconsoles.md)** per tradurre le chiamate di applicazioni da riga di comando di Windows esistenti in sequenze di terminale virtuale e inviarle a un altro ambiente host in modalità remota o tra piattaforme.</span><span class="sxs-lookup"><span data-stu-id="aa060-190">On the contrary, the Windows Console host has provided the **[pseudoconsole](pseudoconsoles.md)** technology to translate existing Windows command-line application calls into virtual terminal sequences and forward them to another hosting environment remotely or across platforms.</span></span>

<span data-ttu-id="aa060-191">Questa procedura non è ottimale.</span><span class="sxs-lookup"><span data-stu-id="aa060-191">This translation is not perfect.</span></span> <span data-ttu-id="aa060-192">Richiede che la finestra host della console mantenga un ambiente simulato degli elementi che Windows avrebbe mostrato all'utente.</span><span class="sxs-lookup"><span data-stu-id="aa060-192">It requires the console host window to maintain a simulated environment of what Windows would have displayed to the user.</span></span> <span data-ttu-id="aa060-193">Proietta quindi una replica di questo ambiente simulato all'host della **pseudoconsole**.</span><span class="sxs-lookup"><span data-stu-id="aa060-193">It then projects a replica of this simulated environment to the **pseudoconsole** host.</span></span> <span data-ttu-id="aa060-194">Tutte le chiamate all'API della console di Windows vengono gestite nell'ambiente simulato per soddisfare le esigenze dell'applicazione client da riga di comando legacy.</span><span class="sxs-lookup"><span data-stu-id="aa060-194">All Windows Console API calls are operated within the simulated environment to serve the needs of the legacy command-line client application.</span></span> <span data-ttu-id="aa060-195">Solo gli effetti vengono propagati nell'host finale.</span><span class="sxs-lookup"><span data-stu-id="aa060-195">Only the effects are propagated onto the final host.</span></span>

<span data-ttu-id="aa060-196">Se un'applicazione da riga di comando desidera la compatibilità completa tra le piattaforme e il supporto completo di tutte le nuove funzionalità e degli scenari sia in Windows che altrove è quindi consigliabile passare alle sequenze di terminale virtuale e modificare l'architettura delle applicazioni da riga di comando per allinearle a tutte le piattaforme.</span><span class="sxs-lookup"><span data-stu-id="aa060-196">A command-line application desiring full compatibility across platforms and full support of all new features and scenarios both on Windows and elsewhere is therefore recommended to move to virtual terminal sequences and adjust the architecture of command-line applications to align with all platforms.</span></span>

<span data-ttu-id="aa060-197">Altre informazioni su questa transizione di Windows per le applicazioni da riga di comando sono disponibili nella [roadmap dell'ecosistema](ecosystem-roadmap.md).</span><span class="sxs-lookup"><span data-stu-id="aa060-197">More information about this Windows transition for command-line applications can be found on our [ecosystem roadmap](ecosystem-roadmap.md).</span></span>
